(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))e(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const s of r.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&e(s)}).observe(document,{childList:!0,subtree:!0});function t(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerpolicy&&(r.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?r.credentials="include":o.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function e(o){if(o.ep)return;o.ep=!0;const r=t(o);fetch(o.href,r)}})();function P(){}function kt(i){return i&&typeof i=="object"&&typeof i.then=="function"}function gt(i){return i()}function lt(){return Object.create(null)}function D(i){i.forEach(gt)}function wt(i){return typeof i=="function"}function Pt(i,n){return i!=i?n==n:i!==n||i&&typeof i=="object"||typeof i=="function"}function It(i){return Object.keys(i).length===0}function f(i,n){i.appendChild(n)}function I(i,n,t){i.insertBefore(n,t||null)}function O(i){i.parentNode&&i.parentNode.removeChild(i)}function Tt(i,n){for(let t=0;t<i.length;t+=1)i[t]&&i[t].d(n)}function m(i){return document.createElement(i)}function q(i){return document.createTextNode(i)}function C(){return q(" ")}function jt(){return q("")}function Q(i,n,t,e){return i.addEventListener(n,t,e),()=>i.removeEventListener(n,t,e)}function St(i){return function(n){return n.preventDefault(),i.call(this,n)}}function b(i,n,t){t==null?i.removeAttribute(n):i.getAttribute(n)!==t&&i.setAttribute(n,t)}function Et(i){return Array.from(i.childNodes)}function ut(i,n){n=""+n,i.wholeText!==n&&(i.data=n)}let U;function A(i){U=i}function xt(){if(!U)throw new Error("Function called outside component initialization");return U}const $=[],ct=[],z=[],dt=[],At=Promise.resolve();let Z=!1;function Rt(){Z||(Z=!0,At.then(ot))}function tt(i){z.push(i)}const X=new Set;let J=0;function ot(){const i=U;do{for(;J<$.length;){const n=$[J];J++,A(n),Lt(n.$$)}for(A(null),$.length=0,J=0;ct.length;)ct.pop()();for(let n=0;n<z.length;n+=1){const t=z[n];X.has(t)||(X.add(t),t())}z.length=0}while($.length);for(;dt.length;)dt.pop()();Z=!1,X.clear(),A(i)}function Lt(i){if(i.fragment!==null){i.update(),D(i.before_update);const n=i.dirty;i.dirty=[-1],i.fragment&&i.fragment.p(i.ctx,n),i.after_update.forEach(tt)}}const H=new Set;let R;function Nt(){R={r:0,c:[],p:R}}function $t(){R.r||D(R.c),R=R.p}function _t(i,n){i&&i.i&&(H.delete(i),i.i(n))}function qt(i,n,t,e){if(i&&i.o){if(H.has(i))return;H.add(i),R.c.push(()=>{H.delete(i),e&&(t&&i.d(1),e())}),i.o(n)}else e&&e()}function ht(i,n){const t=n.token={};function e(o,r,s,a){if(n.token!==t)return;n.resolved=a;let u=n.ctx;s!==void 0&&(u=u.slice(),u[s]=a);const c=o&&(n.current=o)(u);let d=!1;n.block&&(n.blocks?n.blocks.forEach((l,h)=>{h!==r&&l&&(Nt(),qt(l,1,1,()=>{n.blocks[h]===l&&(n.blocks[h]=null)}),$t())}):n.block.d(1),c.c(),_t(c,1),c.m(n.mount(),n.anchor),d=!0),n.block=c,n.blocks&&(n.blocks[r]=c),d&&ot()}if(kt(i)){const o=xt();if(i.then(r=>{A(o),e(n.then,1,n.value,r),A(null)},r=>{if(A(o),e(n.catch,2,n.error,r),A(null),!n.hasCatch)throw r}),n.current!==n.pending)return e(n.pending,0),!0}else{if(n.current!==n.then)return e(n.then,1,n.value,i),!0;n.resolved=i}}function Ut(i,n,t){const e=n.slice(),{resolved:o}=i;i.current===i.then&&(e[i.value]=o),i.current===i.catch&&(e[i.error]=o),i.block.p(e,t)}function Ft(i,n,t,e){const{fragment:o,after_update:r}=i.$$;o&&o.m(n,t),e||tt(()=>{const s=i.$$.on_mount.map(gt).filter(wt);i.$$.on_destroy?i.$$.on_destroy.push(...s):D(s),i.$$.on_mount=[]}),r.forEach(tt)}function Dt(i,n){const t=i.$$;t.fragment!==null&&(D(t.on_destroy),t.fragment&&t.fragment.d(n),t.on_destroy=t.fragment=null,t.ctx=[])}function Gt(i,n){i.$$.dirty[0]===-1&&($.push(i),Rt(),i.$$.dirty.fill(0)),i.$$.dirty[n/31|0]|=1<<n%31}function Mt(i,n,t,e,o,r,s,a=[-1]){const u=U;A(i);const c=i.$$={fragment:null,ctx:[],props:r,update:P,not_equal:o,bound:lt(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(n.context||(u?u.$$.context:[])),callbacks:lt(),dirty:a,skip_bound:!1,root:n.target||u.$$.root};s&&s(c.root);let d=!1;if(c.ctx=t?t(i,n.props||{},(l,h,...p)=>{const v=p.length?p[0]:h;return c.ctx&&o(c.ctx[l],c.ctx[l]=v)&&(!c.skip_bound&&c.bound[l]&&c.bound[l](v),d&&Gt(i,l)),h}):[],c.update(),d=!0,D(c.before_update),c.fragment=e?e(c.ctx):!1,n.target){if(n.hydrate){const l=Et(n.target);c.fragment&&c.fragment.l(l),l.forEach(O)}else c.fragment&&c.fragment.c();n.intro&&_t(i.$$.fragment),Ft(i,n.target,n.anchor,n.customElement),ot()}A(u)}class Vt{$destroy(){Dt(this,1),this.$destroy=P}$on(n,t){if(!wt(t))return P;const e=this.$$.callbacks[n]||(this.$$.callbacks[n]=[]);return e.push(t),()=>{const o=e.indexOf(t);o!==-1&&e.splice(o,1)}}$set(n){this.$$set&&!It(n)&&(this.$$.skip_bound=!0,this.$$set(n),this.$$.skip_bound=!1)}}var et=function(i,n){return et=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])},et(i,n)};function y(i,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function t(){this.constructor=i}et(i,n),i.prototype=n===null?Object.create(n):(t.prototype=n.prototype,new t)}var nt=function(){return nt=Object.assign||function(i){for(var n,t=1,e=arguments.length;t<e;t++)for(var o in n=arguments[t])Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o]);return i},nt.apply(this,arguments)};function g(i,n,t,e){return new(t||(t=Promise))(function(o,r){function s(c){try{u(e.next(c))}catch(d){r(d)}}function a(c){try{u(e.throw(c))}catch(d){r(d)}}function u(c){var d;c.done?o(c.value):(d=c.value,d instanceof t?d:new t(function(l){l(d)})).then(s,a)}u((e=e.apply(i,n||[])).next())})}function w(i,n){var t,e,o,r,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(r[Symbol.iterator]=function(){return this}),r;function a(u){return function(c){return function(d){if(t)throw new TypeError("Generator is already executing.");for(;s;)try{if(t=1,e&&(o=2&d[0]?e.return:d[0]?e.throw||((o=e.return)&&o.call(e),0):e.next)&&!(o=o.call(e,d[1])).done)return o;switch(e=0,o&&(d=[2&d[0],o.value]),d[0]){case 0:case 1:o=d;break;case 4:return s.label++,{value:d[1],done:!1};case 5:s.label++,e=d[1],d=[0];continue;case 7:d=s.ops.pop(),s.trys.pop();continue;default:if(o=s.trys,!((o=o.length>0&&o[o.length-1])||d[0]!==6&&d[0]!==2)){s=0;continue}if(d[0]===3&&(!o||d[1]>o[0]&&d[1]<o[3])){s.label=d[1];break}if(d[0]===6&&s.label<o[1]){s.label=o[1],o=d;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(d);break}o[2]&&s.ops.pop(),s.trys.pop();continue}d=n.call(i,s)}catch(l){d=[6,l],e=0}finally{t=o=0}if(5&d[0])throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}([u,c])}}}var Ct,F=function(i){function n(t){var e,o=this;return(o=i.call(this,"ClientResponseError")||this).url="",o.status=0,o.data={},o.isAbort=!1,o.originalError=null,Object.setPrototypeOf(o,n.prototype),t instanceof n||(o.originalError=t),t!==null&&typeof t=="object"&&(o.url=typeof t.url=="string"?t.url:"",o.status=typeof t.status=="number"?t.status:0,o.data=t.data!==null&&typeof t.data=="object"?t.data:{}),typeof DOMException<"u"&&t instanceof DOMException&&(o.isAbort=!0),o.name="ClientResponseError "+o.status,o.message=(e=o.data)===null||e===void 0?void 0:e.message,o.message||(o.message=o.isAbort?"The request was autocancelled. More info you could find in https://github.com/pocketbase/js-sdk#auto-cancellation.":"Something went wrong while processing your request."),o}return y(n,i),n.prototype.toJSON=function(){return nt({},this)},n}(Error),K=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function pt(i,n,t){var e=Object.assign({},t||{}),o=e.encode||Jt;if(!K.test(i))throw new TypeError("argument name is invalid");var r=o(n);if(r&&!K.test(r))throw new TypeError("argument val is invalid");var s=i+"="+r;if(e.maxAge!=null){var a=e.maxAge-0;if(isNaN(a)||!isFinite(a))throw new TypeError("option maxAge is invalid");s+="; Max-Age="+Math.floor(a)}if(e.domain){if(!K.test(e.domain))throw new TypeError("option domain is invalid");s+="; Domain="+e.domain}if(e.path){if(!K.test(e.path))throw new TypeError("option path is invalid");s+="; Path="+e.path}if(e.expires){if(!function(u){return Object.prototype.toString.call(u)==="[object Date]"||u instanceof Date}(e.expires)||isNaN(e.expires.valueOf()))throw new TypeError("option expires is invalid");s+="; Expires="+e.expires.toUTCString()}if(e.httpOnly&&(s+="; HttpOnly"),e.secure&&(s+="; Secure"),e.priority)switch(typeof e.priority=="string"?e.priority.toLowerCase():e.priority){case"low":s+="; Priority=Low";break;case"medium":s+="; Priority=Medium";break;case"high":s+="; Priority=High";break;default:throw new TypeError("option priority is invalid")}if(e.sameSite)switch(typeof e.sameSite=="string"?e.sameSite.toLowerCase():e.sameSite){case!0:s+="; SameSite=Strict";break;case"lax":s+="; SameSite=Lax";break;case"strict":s+="; SameSite=Strict";break;case"none":s+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return s}function Bt(i){return i.indexOf("%")!==-1?decodeURIComponent(i):i}function Jt(i){return encodeURIComponent(i)}function ft(i){if(i)try{var n=decodeURIComponent(Ct(i.split(".")[1]).split("").map(function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)}).join(""));return JSON.parse(n)||{}}catch{}return{}}Ct=typeof atob=="function"?atob:function(i){var n=String(i).replace(/=+$/,"");if(n.length%4==1)throw new Error("'atob' failed: The string to be decoded is not correctly encoded.");for(var t,e,o=0,r=0,s="";e=n.charAt(r++);~e&&(t=o%4?64*t+e:e,o++%4)?s+=String.fromCharCode(255&t>>(-2*o&6)):0)e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(e);return s};var G=function(){function i(n){n===void 0&&(n={}),this.load(n||{})}return i.prototype.load=function(n){for(var t=0,e=Object.entries(n);t<e.length;t++){var o=e[t],r=o[0],s=o[1];this[r]=s}this.id=n.id!==void 0?n.id:"",this.created=n.created!==void 0?n.created:"",this.updated=n.updated!==void 0?n.updated:""},Object.defineProperty(i.prototype,"isNew",{get:function(){return!this.id},enumerable:!1,configurable:!0}),i.prototype.clone=function(){return new this.constructor(JSON.parse(JSON.stringify(this)))},i.prototype.export=function(){return Object.assign({},this)},i}(),W=function(i){function n(){return i!==null&&i.apply(this,arguments)||this}return y(n,i),n.prototype.load=function(t){i.prototype.load.call(this,t),this.collectionId=typeof t.collectionId=="string"?t.collectionId:"",this.collectionName=typeof t.collectionName=="string"?t.collectionName:"",this.expand=typeof t.expand=="object"&&t.expand!==null?t.expand:{}},n}(G),it=function(i){function n(){return i!==null&&i.apply(this,arguments)||this}return y(n,i),n.prototype.load=function(t){i.prototype.load.call(this,t),this.avatar=typeof t.avatar=="number"?t.avatar:0,this.email=typeof t.email=="string"?t.email:""},n}(G),Kt=function(){function i(){this.baseToken="",this.baseModel=null,this._onChangeCallbacks=[]}return Object.defineProperty(i.prototype,"token",{get:function(){return this.baseToken},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"model",{get:function(){return this.baseModel},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isValid",{get:function(){return!function(n,t){t===void 0&&(t=0);var e=ft(n);return!(Object.keys(e).length>0&&(!e.exp||e.exp-t>Date.now()/1e3))}(this.token)},enumerable:!1,configurable:!0}),i.prototype.save=function(n,t){this.baseToken=n||"",this.baseModel=t!==null&&typeof t=="object"?t.collectionId!==void 0?new W(t):new it(t):null,this.triggerChange()},i.prototype.clear=function(){this.baseToken="",this.baseModel=null,this.triggerChange()},i.prototype.loadFromCookie=function(n,t){t===void 0&&(t="pb_auth");var e=function(r,s){var a={};if(typeof r!="string")return a;for(var u=Object.assign({},s||{}).decode||Bt,c=0;c<r.length;){var d=r.indexOf("=",c);if(d===-1)break;var l=r.indexOf(";",c);if(l===-1)l=r.length;else if(l<d){c=r.lastIndexOf(";",d-1)+1;continue}var h=r.slice(c,d).trim();if(a[h]===void 0){var p=r.slice(d+1,l).trim();p.charCodeAt(0)===34&&(p=p.slice(1,-1));try{a[h]=u(p)}catch{a[h]=p}}c=l+1}return a}(n||"")[t]||"",o={};try{(typeof(o=JSON.parse(e))===null||typeof o!="object"||Array.isArray(o))&&(o={})}catch{}this.save(o.token||"",o.model||null)},i.prototype.exportToCookie=function(n,t){var e,o,r;t===void 0&&(t="pb_auth");var s={secure:!0,sameSite:!0,httpOnly:!0,path:"/"},a=ft(this.token);a!=null&&a.exp?s.expires=new Date(1e3*a.exp):s.expires=new Date("1970-01-01"),n=Object.assign({},s,n);var u={token:this.token,model:((e=this.model)===null||e===void 0?void 0:e.export())||null},c=pt(t,JSON.stringify(u),n),d=typeof Blob<"u"?new Blob([c]).size:c.length;return u.model&&d>4096&&(u.model={id:(o=u==null?void 0:u.model)===null||o===void 0?void 0:o.id,email:(r=u==null?void 0:u.model)===null||r===void 0?void 0:r.email},this.model instanceof W&&(u.model.username=this.model.username,u.model.verified=this.model.verified,u.model.collectionId=this.model.collectionId),c=pt(t,JSON.stringify(u),n)),c},i.prototype.onChange=function(n,t){var e=this;return t===void 0&&(t=!1),this._onChangeCallbacks.push(n),t&&n(this.token,this.model),function(){for(var o=e._onChangeCallbacks.length-1;o>=0;o--)if(e._onChangeCallbacks[o]==n)return delete e._onChangeCallbacks[o],void e._onChangeCallbacks.splice(o,1)}},i.prototype.triggerChange=function(){for(var n=0,t=this._onChangeCallbacks;n<t.length;n++){var e=t[n];e&&e(this.token,this.model)}},i}(),zt=function(i){function n(t){t===void 0&&(t="pocketbase_auth");var e=i.call(this)||this;return e.storageFallback={},e.storageKey=t,e}return y(n,i),Object.defineProperty(n.prototype,"token",{get:function(){return(this._storageGet(this.storageKey)||{}).token||""},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"model",{get:function(){var t,e=this._storageGet(this.storageKey)||{};return e===null||typeof e!="object"||e.model===null||typeof e.model!="object"?null:((t=e.model)===null||t===void 0?void 0:t.collectionId)===void 0?new it(e.model):new W(e.model)},enumerable:!1,configurable:!0}),n.prototype.save=function(t,e){this._storageSet(this.storageKey,{token:t,model:e}),i.prototype.save.call(this,t,e)},n.prototype.clear=function(){this._storageRemove(this.storageKey),i.prototype.clear.call(this)},n.prototype._storageGet=function(t){if(typeof window<"u"&&(window!=null&&window.localStorage)){var e=window.localStorage.getItem(t)||"";try{return JSON.parse(e)}catch{return e}}return this.storageFallback[t]},n.prototype._storageSet=function(t,e){if(typeof window<"u"&&(window!=null&&window.localStorage)){var o=e;typeof e!="string"&&(o=JSON.stringify(e)),window.localStorage.setItem(t,o)}else this.storageFallback[t]=e},n.prototype._storageRemove=function(t){var e;typeof window<"u"&&(window!=null&&window.localStorage)&&((e=window.localStorage)===null||e===void 0||e.removeItem(t)),delete this.storageFallback[t]},n}(Kt),M=function(i){this.client=i},Ht=function(i){function n(){return i!==null&&i.apply(this,arguments)||this}return y(n,i),n.prototype.getAll=function(t){return t===void 0&&(t={}),this.client.send("/api/settings",{method:"GET",params:t}).then(function(e){return e||{}})},n.prototype.update=function(t,e){return t===void 0&&(t={}),e===void 0&&(e={}),this.client.send("/api/settings",{method:"PATCH",params:e,body:t}).then(function(o){return o||{}})},n.prototype.testS3=function(t){return t===void 0&&(t={}),this.client.send("/api/settings/test/s3",{method:"POST",params:t}).then(function(){return!0})},n.prototype.testEmail=function(t,e,o){o===void 0&&(o={});var r={email:t,template:e};return this.client.send("/api/settings/test/email",{method:"POST",params:o,body:r}).then(function(){return!0})},n}(M),Ot=function(i,n,t,e,o){this.page=i>0?i:1,this.perPage=n>=0?n:0,this.totalItems=t>=0?t:0,this.totalPages=e>=0?e:0,this.items=o||[]},rt=function(i){function n(){return i!==null&&i.apply(this,arguments)||this}return y(n,i),n.prototype.getFullList=function(t,e){return t===void 0&&(t=200),e===void 0&&(e={}),this._getFullList(this.baseCrudPath,t,e)},n.prototype.getList=function(t,e,o){return t===void 0&&(t=1),e===void 0&&(e=30),o===void 0&&(o={}),this._getList(this.baseCrudPath,t,e,o)},n.prototype.getFirstListItem=function(t,e){return e===void 0&&(e={}),this._getFirstListItem(this.baseCrudPath,t,e)},n.prototype.getOne=function(t,e){return e===void 0&&(e={}),this._getOne(this.baseCrudPath,t,e)},n.prototype.create=function(t,e){return t===void 0&&(t={}),e===void 0&&(e={}),this._create(this.baseCrudPath,t,e)},n.prototype.update=function(t,e,o){return e===void 0&&(e={}),o===void 0&&(o={}),this._update(this.baseCrudPath,t,e,o)},n.prototype.delete=function(t,e){return e===void 0&&(e={}),this._delete(this.baseCrudPath,t,e)},n}(function(i){function n(){return i!==null&&i.apply(this,arguments)||this}return y(n,i),n.prototype._getFullList=function(t,e,o){var r=this;e===void 0&&(e=100),o===void 0&&(o={});var s=[],a=function(u){return g(r,void 0,void 0,function(){return w(this,function(c){return[2,this._getList(t,u,e,o).then(function(d){var l=d,h=l.items,p=l.totalItems;return s=s.concat(h),h.length&&p>s.length?a(u+1):s})]})})};return a(1)},n.prototype._getList=function(t,e,o,r){var s=this;return e===void 0&&(e=1),o===void 0&&(o=30),r===void 0&&(r={}),r=Object.assign({page:e,perPage:o},r),this.client.send(t,{method:"GET",params:r}).then(function(a){var u=[];if(a!=null&&a.items){a.items=a.items||[];for(var c=0,d=a.items;c<d.length;c++){var l=d[c];u.push(s.decode(l))}}return new Ot((a==null?void 0:a.page)||1,(a==null?void 0:a.perPage)||0,(a==null?void 0:a.totalItems)||0,(a==null?void 0:a.totalPages)||0,u)})},n.prototype._getOne=function(t,e,o){var r=this;return o===void 0&&(o={}),this.client.send(t+"/"+encodeURIComponent(e),{method:"GET",params:o}).then(function(s){return r.decode(s)})},n.prototype._getFirstListItem=function(t,e,o){return o===void 0&&(o={}),o=Object.assign({filter:e,$cancelKey:"one_by_filter_"+t+"_"+e},o),this._getList(t,1,1,o).then(function(r){var s;if(!(!((s=r==null?void 0:r.items)===null||s===void 0)&&s.length))throw new F({status:404,data:{code:404,message:"The requested resource wasn't found.",data:{}}});return r.items[0]})},n.prototype._create=function(t,e,o){var r=this;return e===void 0&&(e={}),o===void 0&&(o={}),this.client.send(t,{method:"POST",params:o,body:e}).then(function(s){return r.decode(s)})},n.prototype._update=function(t,e,o,r){var s=this;return o===void 0&&(o={}),r===void 0&&(r={}),this.client.send(t+"/"+encodeURIComponent(e),{method:"PATCH",params:r,body:o}).then(function(a){return s.decode(a)})},n.prototype._delete=function(t,e,o){return o===void 0&&(o={}),this.client.send(t+"/"+encodeURIComponent(e),{method:"DELETE",params:o}).then(function(){return!0})},n}(M)),Wt=function(i){function n(){return i!==null&&i.apply(this,arguments)||this}return y(n,i),n.prototype.decode=function(t){return new it(t)},Object.defineProperty(n.prototype,"baseCrudPath",{get:function(){return"/api/admins"},enumerable:!1,configurable:!0}),n.prototype.update=function(t,e,o){var r=this;return e===void 0&&(e={}),o===void 0&&(o={}),i.prototype.update.call(this,t,e,o).then(function(s){var a,u;return r.client.authStore.model&&((a=r.client.authStore.model)===null||a===void 0?void 0:a.collectionId)===void 0&&((u=r.client.authStore.model)===null||u===void 0?void 0:u.id)===(s==null?void 0:s.id)&&r.client.authStore.save(r.client.authStore.token,s),s})},n.prototype.delete=function(t,e){var o=this;return e===void 0&&(e={}),i.prototype.delete.call(this,t,e).then(function(r){var s,a;return r&&o.client.authStore.model&&((s=o.client.authStore.model)===null||s===void 0?void 0:s.collectionId)===void 0&&((a=o.client.authStore.model)===null||a===void 0?void 0:a.id)===t&&o.client.authStore.clear(),r})},n.prototype.authResponse=function(t){var e=this.decode((t==null?void 0:t.admin)||{});return t!=null&&t.token&&(t!=null&&t.admin)&&this.client.authStore.save(t.token,e),Object.assign({},t,{token:(t==null?void 0:t.token)||"",admin:e})},n.prototype.authWithPassword=function(t,e,o,r){return o===void 0&&(o={}),r===void 0&&(r={}),o=Object.assign({identity:t,password:e},o),this.client.send(this.baseCrudPath+"/auth-with-password",{method:"POST",params:r,body:o,headers:{Authorization:""}}).then(this.authResponse.bind(this))},n.prototype.authRefresh=function(t,e){return t===void 0&&(t={}),e===void 0&&(e={}),this.client.send(this.baseCrudPath+"/auth-refresh",{method:"POST",params:e,body:t}).then(this.authResponse.bind(this))},n.prototype.requestPasswordReset=function(t,e,o){return e===void 0&&(e={}),o===void 0&&(o={}),e=Object.assign({email:t},e),this.client.send(this.baseCrudPath+"/request-password-reset",{method:"POST",params:o,body:e}).then(function(){return!0})},n.prototype.confirmPasswordReset=function(t,e,o,r,s){return r===void 0&&(r={}),s===void 0&&(s={}),r=Object.assign({token:t,password:e,passwordConfirm:o},r),this.client.send(this.baseCrudPath+"/confirm-password-reset",{method:"POST",params:s,body:r}).then(function(){return!0})},n}(rt),Qt=function(i){function n(){return i!==null&&i.apply(this,arguments)||this}return y(n,i),n.prototype.load=function(t){i.prototype.load.call(this,t),this.recordId=typeof t.recordId=="string"?t.recordId:"",this.collectionId=typeof t.collectionId=="string"?t.collectionId:"",this.provider=typeof t.provider=="string"?t.provider:"",this.providerId=typeof t.providerId=="string"?t.providerId:""},n}(G),Yt=function(i){function n(t,e){var o=i.call(this,t)||this;return o.collectionIdOrName=e,o}return y(n,i),n.prototype.decode=function(t){return new W(t)},Object.defineProperty(n.prototype,"baseCrudPath",{get:function(){return this.baseCollectionPath+"/records"},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"baseCollectionPath",{get:function(){return"/api/collections/"+encodeURIComponent(this.collectionIdOrName)},enumerable:!1,configurable:!0}),n.prototype.subscribeOne=function(t,e){return g(this,void 0,void 0,function(){return w(this,function(o){return console.warn("PocketBase: subscribeOne(recordId, callback) is deprecated. Please replace it with subscribe(recordId, callback)."),[2,this.client.realtime.subscribe(this.collectionIdOrName+"/"+t,e)]})})},n.prototype.subscribe=function(t,e){return g(this,void 0,void 0,function(){var o;return w(this,function(r){if(typeof t=="function")return console.warn("PocketBase: subscribe(callback) is deprecated. Please replace it with subscribe('*', callback)."),[2,this.client.realtime.subscribe(this.collectionIdOrName,t)];if(!e)throw new Error("Missing subscription callback.");if(t==="")throw new Error("Missing topic.");return o=this.collectionIdOrName,t!=="*"&&(o+="/"+t),[2,this.client.realtime.subscribe(o,e)]})})},n.prototype.unsubscribe=function(t){return g(this,void 0,void 0,function(){return w(this,function(e){return t==="*"?[2,this.client.realtime.unsubscribe(this.collectionIdOrName)]:t?[2,this.client.realtime.unsubscribe(this.collectionIdOrName+"/"+t)]:[2,this.client.realtime.unsubscribeByPrefix(this.collectionIdOrName)]})})},n.prototype.getFullList=function(t,e){return t===void 0&&(t=200),e===void 0&&(e={}),i.prototype.getFullList.call(this,t,e)},n.prototype.getList=function(t,e,o){return t===void 0&&(t=1),e===void 0&&(e=30),o===void 0&&(o={}),i.prototype.getList.call(this,t,e,o)},n.prototype.getFirstListItem=function(t,e){return e===void 0&&(e={}),i.prototype.getFirstListItem.call(this,t,e)},n.prototype.getOne=function(t,e){return e===void 0&&(e={}),i.prototype.getOne.call(this,t,e)},n.prototype.create=function(t,e){return t===void 0&&(t={}),e===void 0&&(e={}),i.prototype.create.call(this,t,e)},n.prototype.update=function(t,e,o){var r=this;return e===void 0&&(e={}),o===void 0&&(o={}),i.prototype.update.call(this,t,e,o).then(function(s){var a,u;return((a=r.client.authStore.model)===null||a===void 0?void 0:a.collectionId)!==void 0&&((u=r.client.authStore.model)===null||u===void 0?void 0:u.id)===(s==null?void 0:s.id)&&r.client.authStore.save(r.client.authStore.token,s),s})},n.prototype.delete=function(t,e){var o=this;return e===void 0&&(e={}),i.prototype.delete.call(this,t,e).then(function(r){var s,a;return r&&((s=o.client.authStore.model)===null||s===void 0?void 0:s.collectionId)!==void 0&&((a=o.client.authStore.model)===null||a===void 0?void 0:a.id)===t&&o.client.authStore.clear(),r})},n.prototype.authResponse=function(t){var e=this.decode((t==null?void 0:t.record)||{});return this.client.authStore.save(t==null?void 0:t.token,e),Object.assign({},t,{token:(t==null?void 0:t.token)||"",record:e})},n.prototype.listAuthMethods=function(t){return t===void 0&&(t={}),this.client.send(this.baseCollectionPath+"/auth-methods",{method:"GET",params:t}).then(function(e){return Object.assign({},e,{usernamePassword:!!(e!=null&&e.usernamePassword),emailPassword:!!(e!=null&&e.emailPassword),authProviders:Array.isArray(e==null?void 0:e.authProviders)?e==null?void 0:e.authProviders:[]})})},n.prototype.authWithPassword=function(t,e,o,r){var s=this;return o===void 0&&(o={}),r===void 0&&(r={}),o=Object.assign({identity:t,password:e},o),this.client.send(this.baseCollectionPath+"/auth-with-password",{method:"POST",params:r,body:o,headers:{Authorization:""}}).then(function(a){return s.authResponse(a)})},n.prototype.authWithOAuth2=function(t,e,o,r,s,a,u){var c=this;return s===void 0&&(s={}),a===void 0&&(a={}),u===void 0&&(u={}),a=Object.assign({provider:t,code:e,codeVerifier:o,redirectUrl:r,createData:s},a),this.client.send(this.baseCollectionPath+"/auth-with-oauth2",{method:"POST",params:u,body:a}).then(function(d){return c.authResponse(d)})},n.prototype.authRefresh=function(t,e){var o=this;return t===void 0&&(t={}),e===void 0&&(e={}),this.client.send(this.baseCollectionPath+"/auth-refresh",{method:"POST",params:e,body:t}).then(function(r){return o.authResponse(r)})},n.prototype.requestPasswordReset=function(t,e,o){return e===void 0&&(e={}),o===void 0&&(o={}),e=Object.assign({email:t},e),this.client.send(this.baseCollectionPath+"/request-password-reset",{method:"POST",params:o,body:e}).then(function(){return!0})},n.prototype.confirmPasswordReset=function(t,e,o,r,s){return r===void 0&&(r={}),s===void 0&&(s={}),r=Object.assign({token:t,password:e,passwordConfirm:o},r),this.client.send(this.baseCollectionPath+"/confirm-password-reset",{method:"POST",params:s,body:r}).then(function(){return!0})},n.prototype.requestVerification=function(t,e,o){return e===void 0&&(e={}),o===void 0&&(o={}),e=Object.assign({email:t},e),this.client.send(this.baseCollectionPath+"/request-verification",{method:"POST",params:o,body:e}).then(function(){return!0})},n.prototype.confirmVerification=function(t,e,o){return e===void 0&&(e={}),o===void 0&&(o={}),e=Object.assign({token:t},e),this.client.send(this.baseCollectionPath+"/confirm-verification",{method:"POST",params:o,body:e}).then(function(){return!0})},n.prototype.requestEmailChange=function(t,e,o){return e===void 0&&(e={}),o===void 0&&(o={}),e=Object.assign({newEmail:t},e),this.client.send(this.baseCollectionPath+"/request-email-change",{method:"POST",params:o,body:e}).then(function(){return!0})},n.prototype.confirmEmailChange=function(t,e,o,r){return o===void 0&&(o={}),r===void 0&&(r={}),o=Object.assign({token:t,password:e},o),this.client.send(this.baseCollectionPath+"/confirm-email-change",{method:"POST",params:r,body:o}).then(function(){return!0})},n.prototype.listExternalAuths=function(t,e){return e===void 0&&(e={}),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(t)+"/external-auths",{method:"GET",params:e}).then(function(o){var r=[];if(Array.isArray(o))for(var s=0,a=o;s<a.length;s++){var u=a[s];r.push(new Qt(u))}return r})},n.prototype.unlinkExternalAuth=function(t,e,o){return o===void 0&&(o={}),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(t)+"/external-auths/"+encodeURIComponent(e),{method:"DELETE",params:o}).then(function(){return!0})},n}(rt),Xt=function(){function i(n){n===void 0&&(n={}),this.load(n||{})}return i.prototype.load=function(n){this.id=n.id!==void 0?n.id:"",this.name=n.name!==void 0?n.name:"",this.type=n.type!==void 0?n.type:"text",this.system=!!n.system,this.required=!!n.required,this.unique=!!n.unique,this.options=typeof n.options=="object"&&n.options!==null?n.options:{}},i}(),Zt=function(i){function n(){return i!==null&&i.apply(this,arguments)||this}return y(n,i),n.prototype.load=function(t){i.prototype.load.call(this,t),this.system=!!t.system,this.name=typeof t.name=="string"?t.name:"",this.type=typeof t.type=="string"?t.type:"base",this.options=t.options!==void 0?t.options:{},this.listRule=typeof t.listRule=="string"?t.listRule:null,this.viewRule=typeof t.viewRule=="string"?t.viewRule:null,this.createRule=typeof t.createRule=="string"?t.createRule:null,this.updateRule=typeof t.updateRule=="string"?t.updateRule:null,this.deleteRule=typeof t.deleteRule=="string"?t.deleteRule:null,t.schema=Array.isArray(t.schema)?t.schema:[],this.schema=[];for(var e=0,o=t.schema;e<o.length;e++){var r=o[e];this.schema.push(new Xt(r))}},Object.defineProperty(n.prototype,"isBase",{get:function(){return this.type==="base"},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isAuth",{get:function(){return this.type==="auth"},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isSingle",{get:function(){return this.type==="single"},enumerable:!1,configurable:!0}),n}(G),te=function(i){function n(){return i!==null&&i.apply(this,arguments)||this}return y(n,i),n.prototype.decode=function(t){return new Zt(t)},Object.defineProperty(n.prototype,"baseCrudPath",{get:function(){return"/api/collections"},enumerable:!1,configurable:!0}),n.prototype.import=function(t,e,o){return e===void 0&&(e=!1),o===void 0&&(o={}),g(this,void 0,void 0,function(){return w(this,function(r){return[2,this.client.send(this.baseCrudPath+"/import",{method:"PUT",params:o,body:{collections:t,deleteMissing:e}}).then(function(){return!0})]})})},n}(rt),mt=function(i){function n(){return i!==null&&i.apply(this,arguments)||this}return y(n,i),n.prototype.load=function(t){i.prototype.load.call(this,t),t.remoteIp=t.remoteIp||t.ip,this.url=typeof t.url=="string"?t.url:"",this.method=typeof t.method=="string"?t.method:"GET",this.status=typeof t.status=="number"?t.status:200,this.auth=typeof t.auth=="string"?t.auth:"guest",this.remoteIp=typeof t.remoteIp=="string"?t.remoteIp:"",this.userIp=typeof t.userIp=="string"?t.userIp:"",this.referer=typeof t.referer=="string"?t.referer:"",this.userAgent=typeof t.userAgent=="string"?t.userAgent:"",this.meta=typeof t.meta=="object"&&t.meta!==null?t.meta:{}},n}(G),ee=function(i){function n(){return i!==null&&i.apply(this,arguments)||this}return y(n,i),n.prototype.getRequestsList=function(t,e,o){return t===void 0&&(t=1),e===void 0&&(e=30),o===void 0&&(o={}),o=Object.assign({page:t,perPage:e},o),this.client.send("/api/logs/requests",{method:"GET",params:o}).then(function(r){var s=[];if(r!=null&&r.items){r.items=(r==null?void 0:r.items)||[];for(var a=0,u=r.items;a<u.length;a++){var c=u[a];s.push(new mt(c))}}return new Ot((r==null?void 0:r.page)||1,(r==null?void 0:r.perPage)||0,(r==null?void 0:r.totalItems)||0,(r==null?void 0:r.totalPages)||0,s)})},n.prototype.getRequest=function(t,e){return e===void 0&&(e={}),this.client.send("/api/logs/requests/"+encodeURIComponent(t),{method:"GET",params:e}).then(function(o){return new mt(o)})},n.prototype.getRequestsStats=function(t){return t===void 0&&(t={}),this.client.send("/api/logs/requests/stats",{method:"GET",params:t}).then(function(e){return e})},n}(M),ne=function(i){function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.clientId="",t.eventSource=null,t.subscriptions={},t.lastSentTopics=[],t.maxConnectTimeout=1e4,t.reconnectAttempts=0,t.maxReconnectAttempts=1/0,t.predefinedReconnectIntervals=[200,300,500,1e3,1200,1500,2e3],t.pendingConnects=[],t}return y(n,i),Object.defineProperty(n.prototype,"isConnected",{get:function(){return!!this.eventSource&&!!this.clientId&&!this.pendingConnects.length},enumerable:!1,configurable:!0}),n.prototype.subscribe=function(t,e){var o;return g(this,void 0,void 0,function(){var r,s=this;return w(this,function(a){switch(a.label){case 0:if(!t)throw new Error("topic must be set.");return r=function(u){var c,d=u;try{c=JSON.parse(d==null?void 0:d.data)}catch{}e(c||{})},this.subscriptions[t]||(this.subscriptions[t]=[]),this.subscriptions[t].push(r),this.isConnected?[3,2]:[4,this.connect()];case 1:return a.sent(),[3,5];case 2:return this.subscriptions[t].length!==1?[3,4]:[4,this.submitSubscriptions()];case 3:return a.sent(),[3,5];case 4:(o=this.eventSource)===null||o===void 0||o.addEventListener(t,r),a.label=5;case 5:return[2,function(){return g(s,void 0,void 0,function(){return w(this,function(u){return[2,this.unsubscribeByTopicAndListener(t,r)]})})}]}})})},n.prototype.unsubscribe=function(t){var e;return g(this,void 0,void 0,function(){var o,r,s;return w(this,function(a){switch(a.label){case 0:if(!this.hasSubscriptionListeners(t))return[2];if(t){for(o=0,r=this.subscriptions[t];o<r.length;o++)s=r[o],(e=this.eventSource)===null||e===void 0||e.removeEventListener(t,s);delete this.subscriptions[t]}else this.subscriptions={};return this.hasSubscriptionListeners()?[3,1]:(this.disconnect(),[3,3]);case 1:return this.hasSubscriptionListeners(t)?[3,3]:[4,this.submitSubscriptions()];case 2:a.sent(),a.label=3;case 3:return[2]}})})},n.prototype.unsubscribeByPrefix=function(t){var e;return g(this,void 0,void 0,function(){var o,r,s,a,u;return w(this,function(c){switch(c.label){case 0:for(r in o=!1,this.subscriptions)if(r.startsWith(t)){for(o=!0,s=0,a=this.subscriptions[r];s<a.length;s++)u=a[s],(e=this.eventSource)===null||e===void 0||e.removeEventListener(r,u);delete this.subscriptions[r]}return o?this.hasSubscriptionListeners()?[4,this.submitSubscriptions()]:[3,2]:[2];case 1:return c.sent(),[3,3];case 2:this.disconnect(),c.label=3;case 3:return[2]}})})},n.prototype.unsubscribeByTopicAndListener=function(t,e){var o;return g(this,void 0,void 0,function(){var r,s;return w(this,function(a){switch(a.label){case 0:if(!Array.isArray(this.subscriptions[t])||!this.subscriptions[t].length)return[2];for(r=!1,s=this.subscriptions[t].length-1;s>=0;s--)this.subscriptions[t][s]===e&&(r=!0,delete this.subscriptions[t][s],this.subscriptions[t].splice(s,1),(o=this.eventSource)===null||o===void 0||o.removeEventListener(t,e));return r?(this.subscriptions[t].length||delete this.subscriptions[t],this.hasSubscriptionListeners()?[3,1]:(this.disconnect(),[3,3])):[2];case 1:return this.hasSubscriptionListeners(t)?[3,3]:[4,this.submitSubscriptions()];case 2:a.sent(),a.label=3;case 3:return[2]}})})},n.prototype.hasSubscriptionListeners=function(t){var e,o;if(this.subscriptions=this.subscriptions||{},t)return!!(!((e=this.subscriptions[t])===null||e===void 0)&&e.length);for(var r in this.subscriptions)if(!((o=this.subscriptions[r])===null||o===void 0)&&o.length)return!0;return!1},n.prototype.submitSubscriptions=function(){return g(this,void 0,void 0,function(){return w(this,function(t){return this.clientId?(this.addAllSubscriptionListeners(),this.lastSentTopics=this.getNonEmptySubscriptionTopics(),[2,this.client.send("/api/realtime",{method:"POST",body:{clientId:this.clientId,subscriptions:this.lastSentTopics},params:{$cancelKey:"realtime_"+this.clientId}}).catch(function(e){if(!(e!=null&&e.isAbort))throw e})]):[2]})})},n.prototype.getNonEmptySubscriptionTopics=function(){var t=[];for(var e in this.subscriptions)this.subscriptions[e].length&&t.push(e);return t},n.prototype.addAllSubscriptionListeners=function(){if(this.eventSource)for(var t in this.removeAllSubscriptionListeners(),this.subscriptions)for(var e=0,o=this.subscriptions[t];e<o.length;e++){var r=o[e];this.eventSource.addEventListener(t,r)}},n.prototype.removeAllSubscriptionListeners=function(){if(this.eventSource)for(var t in this.subscriptions)for(var e=0,o=this.subscriptions[t];e<o.length;e++){var r=o[e];this.eventSource.removeEventListener(t,r)}},n.prototype.connect=function(){return g(this,void 0,void 0,function(){var t=this;return w(this,function(e){return this.reconnectAttempts>0?[2]:[2,new Promise(function(o,r){t.pendingConnects.push({resolve:o,reject:r}),t.pendingConnects.length>1||t.initConnect()})]})})},n.prototype.initConnect=function(){var t=this;this.disconnect(!0),clearTimeout(this.connectTimeoutId),this.connectTimeoutId=setTimeout(function(){t.connectErrorHandler(new Error("EventSource connect took too long."))},this.maxConnectTimeout),this.eventSource=new EventSource(this.client.buildUrl("/api/realtime")),this.eventSource.onerror=function(e){t.connectErrorHandler(new Error("Failed to establish realtime connection."))},this.eventSource.addEventListener("PB_CONNECT",function(e){var o=e;t.clientId=o==null?void 0:o.lastEventId,t.submitSubscriptions().then(function(){return g(t,void 0,void 0,function(){var r;return w(this,function(s){switch(s.label){case 0:r=3,s.label=1;case 1:return this.hasUnsentSubscriptions()&&r>0?(r--,[4,this.submitSubscriptions()]):[3,3];case 2:return s.sent(),[3,1];case 3:return[2]}})})}).then(function(){for(var r=0,s=t.pendingConnects;r<s.length;r++)s[r].resolve();t.pendingConnects=[],t.reconnectAttempts=0,clearTimeout(t.reconnectTimeoutId),clearTimeout(t.connectTimeoutId)}).catch(function(r){t.clientId="",t.connectErrorHandler(r)})})},n.prototype.hasUnsentSubscriptions=function(){var t=this.getNonEmptySubscriptionTopics();if(t.length!=this.lastSentTopics.length)return!0;for(var e=0,o=t;e<o.length;e++){var r=o[e];if(!this.lastSentTopics.includes(r))return!0}return!1},n.prototype.connectErrorHandler=function(t){var e=this;if(clearTimeout(this.connectTimeoutId),clearTimeout(this.reconnectTimeoutId),!this.clientId&&!this.reconnectAttempts||this.reconnectAttempts>this.maxReconnectAttempts){for(var o=0,r=this.pendingConnects;o<r.length;o++)r[o].reject(new F(t));this.disconnect()}else{this.disconnect(!0);var s=this.predefinedReconnectIntervals[this.reconnectAttempts]||this.predefinedReconnectIntervals[this.predefinedReconnectIntervals.length-1];this.reconnectAttempts++,this.reconnectTimeoutId=setTimeout(function(){e.initConnect()},s)}},n.prototype.disconnect=function(t){var e;if(t===void 0&&(t=!1),clearTimeout(this.connectTimeoutId),clearTimeout(this.reconnectTimeoutId),this.removeAllSubscriptionListeners(),(e=this.eventSource)===null||e===void 0||e.close(),this.eventSource=null,this.clientId="",!t){this.reconnectAttempts=0;for(var o=new F(new Error("Realtime disconnected.")),r=0,s=this.pendingConnects;r<s.length;r++)s[r].reject(o);this.pendingConnects=[]}},n}(M),oe=function(i){function n(){return i!==null&&i.apply(this,arguments)||this}return y(n,i),n.prototype.check=function(t){return t===void 0&&(t={}),this.client.send("/api/health",{method:"GET",params:t})},n}(M),ie=function(){function i(n,t,e){n===void 0&&(n="/"),e===void 0&&(e="en-US"),this.cancelControllers={},this.recordServices={},this.enableAutoCancellation=!0,this.baseUrl=n,this.lang=e,this.authStore=t||new zt,this.admins=new Wt(this),this.collections=new te(this),this.logs=new ee(this),this.settings=new Ht(this),this.realtime=new ne(this),this.health=new oe(this)}return i.prototype.collection=function(n){return this.recordServices[n]||(this.recordServices[n]=new Yt(this,n)),this.recordServices[n]},i.prototype.autoCancellation=function(n){return this.enableAutoCancellation=!!n,this},i.prototype.cancelRequest=function(n){return this.cancelControllers[n]&&(this.cancelControllers[n].abort(),delete this.cancelControllers[n]),this},i.prototype.cancelAllRequests=function(){for(var n in this.cancelControllers)this.cancelControllers[n].abort();return this.cancelControllers={},this},i.prototype.send=function(n,t){var e,o,r,s,a,u,c,d;return g(this,void 0,void 0,function(){var l,h,p,v,S,j=this;return w(this,function(L){return(l=Object.assign({method:"GET"},t)).body&&l.body.constructor.name!=="FormData"&&(typeof l.body!="string"&&(l.body=JSON.stringify(l.body)),((e=l==null?void 0:l.headers)===null||e===void 0?void 0:e["Content-Type"])===void 0&&(l.headers=Object.assign({},l.headers,{"Content-Type":"application/json"}))),((o=l==null?void 0:l.headers)===null||o===void 0?void 0:o["Accept-Language"])===void 0&&(l.headers=Object.assign({},l.headers,{"Accept-Language":this.lang})),!((r=this.authStore)===null||r===void 0)&&r.token&&((s=l==null?void 0:l.headers)===null||s===void 0?void 0:s.Authorization)===void 0&&(l.headers=Object.assign({},l.headers,{Authorization:this.authStore.token})),this.enableAutoCancellation&&((a=l.params)===null||a===void 0?void 0:a.$autoCancel)!==!1&&(h=((u=l.params)===null||u===void 0?void 0:u.$cancelKey)||(l.method||"GET")+n,this.cancelRequest(h),p=new AbortController,this.cancelControllers[h]=p,l.signal=p.signal),(c=l.params)===null||c===void 0||delete c.$autoCancel,(d=l.params)===null||d===void 0||delete d.$cancelKey,v=this.buildUrl(n),l.params!==void 0&&((S=this.serializeQueryParams(l.params))&&(v+=(v.includes("?")?"&":"?")+S),delete l.params),this.beforeSend&&(l=Object.assign({},this.beforeSend(v,l))),[2,fetch(v,l).then(function(T){return g(j,void 0,void 0,function(){var _;return w(this,function(E){switch(E.label){case 0:_={},E.label=1;case 1:return E.trys.push([1,3,,4]),[4,T.json()];case 2:return _=E.sent(),[3,4];case 3:return E.sent(),[3,4];case 4:if(this.afterSend&&(_=this.afterSend(T,_)),T.status>=400)throw new F({url:T.url,status:T.status,data:_});return[2,_]}})})}).catch(function(T){throw new F(T)})]})})},i.prototype.getFileUrl=function(n,t,e){e===void 0&&(e={});var o=[];o.push("api"),o.push("files"),o.push(encodeURIComponent(n.collectionId||n.collectionName)),o.push(encodeURIComponent(n.id)),o.push(encodeURIComponent(t));var r=this.buildUrl(o.join("/"));if(Object.keys(e).length){var s=new URLSearchParams(e);r+=(r.includes("?")?"&":"?")+s}return r},i.prototype.buildUrl=function(n){var t=this.baseUrl+(this.baseUrl.endsWith("/")?"":"/");return n&&(t+=n.startsWith("/")?n.substring(1):n),t},i.prototype.serializeQueryParams=function(n){var t=[];for(var e in n)if(n[e]!==null){var o=n[e],r=encodeURIComponent(e);if(Array.isArray(o))for(var s=0,a=o;s<a.length;s++){var u=a[s];t.push(r+"="+encodeURIComponent(u))}else o instanceof Date?t.push(r+"="+encodeURIComponent(o.toISOString())):typeof o!==null&&typeof o=="object"?t.push(r+"="+encodeURIComponent(JSON.stringify(o))):t.push(r+"="+encodeURIComponent(o))}return t.join("&")},i}();function vt(i,n,t){const e=i.slice();return e[9]=n[t],e}function re(i){let n,t,e,o,r;return{c(){n=m("p"),n.textContent=`${i[1].authStore.model.email}`,t=C(),e=m("button"),e.textContent="Logga ut",b(e,"class","btn btn-primary")},m(s,a){I(s,n,a),I(s,t,a),I(s,e,a),o||(r=Q(e,"click",i[3]),o=!0)},p:P,d(s){s&&O(n),s&&O(t),s&&O(e),o=!1,r()}}}function se(i){let n,t,e,o;return{c(){n=m("div"),t=m("form"),t.innerHTML=`<div class="mb-3"><label for="username" class="form-label">Användarnamn</label> 
          <input type="text" class="form-control" id="username" name="username"/></div> 
        <div class="mb-3"><label for="password" class="form-label">Lösenord</label> 
          <input type="password" class="form-control" id="password" name="password"/></div> 
        <button type="submit" class="btn btn-primary">Logga in</button>`,b(n,"class","container-sm")},m(r,s){I(r,n,s),f(n,t),e||(o=Q(t,"submit",St(i[2])),e=!0)},p:P,d(r){r&&O(n),e=!1,o()}}}function ae(i){let n,t,e,o,r,s,a,u,c,d,l,h,p,v,S,j,L,T,_,E,st,V,B,Y,at,k={ctx:i,current:null,token:null,hasCatch:!1,pending:ce,then:ue,catch:le,value:0};return ht(B=i[0],k),{c(){n=m("div"),t=m("h3"),t.textContent="Ansök om fil",e=C(),o=m("form"),r=m("label"),r.textContent="Vad vill du ha?",s=C(),a=m("input"),u=C(),c=m("label"),c.textContent="Välj en typ",d=C(),l=m("select"),h=m("option"),h.textContent="Välj en typ",p=m("option"),p.textContent="Spel",v=m("option"),v.textContent="Program",S=m("option"),S.textContent="Annat",j=C(),L=m("button"),L.textContent="Skicka",T=C(),_=m("div"),E=m("h3"),E.textContent="Ansökningar",st=C(),V=m("div"),k.block.c(),b(r,"for","file"),b(a,"type","text"),b(a,"class","form-control mb-3"),b(a,"id","fileInput"),b(a,"name","file"),b(c,"for","type"),h.selected=!0,h.__value="Välj en typ",h.value=h.__value,p.__value="Spel",p.value=p.__value,v.__value="Program",v.value=v.__value,S.__value="Annat",S.value=S.__value,b(l,"class","form-select mb-3"),b(l,"name","type"),b(L,"type","submit"),b(L,"class","btn btn-primary mb-3"),b(n,"class","container-sm card mt-3"),b(_,"class","container-sm mt-5")},m(x,N){I(x,n,N),f(n,t),f(n,e),f(n,o),f(o,r),f(o,s),f(o,a),f(o,u),f(o,c),f(o,d),f(o,l),f(l,h),f(l,p),f(l,v),f(l,S),f(o,j),f(o,L),I(x,T,N),I(x,_,N),f(_,E),f(_,st),f(_,V),k.block.m(V,k.anchor=null),k.mount=()=>V,k.anchor=null,Y||(at=Q(o,"submit",St(i[4])),Y=!0)},p(x,N){i=x,k.ctx=i,N&1&&B!==(B=i[0])&&ht(B,k)||Ut(k,i,N)},d(x){x&&O(n),x&&O(T),x&&O(_),k.block.d(),k.token=null,k=null,Y=!1,at()}}}function le(i){return{c:P,m:P,p:P,d:P}}function ue(i){let n,t=i[0],e=[];for(let o=0;o<t.length;o+=1)e[o]=yt(vt(i,t,o));return{c(){for(let o=0;o<e.length;o+=1)e[o].c();n=jt()},m(o,r){for(let s=0;s<e.length;s+=1)e[s].m(o,r);I(o,n,r)},p(o,r){if(r&35){t=o[0];let s;for(s=0;s<t.length;s+=1){const a=vt(o,t,s);e[s]?e[s].p(a,r):(e[s]=yt(a),e[s].c(),e[s].m(n.parentNode,n))}for(;s<e.length;s+=1)e[s].d(1);e.length=t.length}},d(o){Tt(e,o),o&&O(n)}}}function bt(i){let n,t,e;function o(){return i[6](i[9])}return{c(){n=m("button"),n.textContent="Ta bort",b(n,"class","btn btn-danger")},m(r,s){I(r,n,s),t||(e=Q(n,"click",o),t=!0)},p(r,s){i=r},d(r){r&&O(n),t=!1,e()}}}function yt(i){let n,t,e=i[9].file+"",o,r,s,a,u=i[9].expand.user.name+"",c,d,l,h=i[9].user===i[1].authStore.model.id&&bt(i);return{c(){n=m("div"),t=m("h5"),o=q(e),r=C(),s=m("p"),a=q("Från användare: "),c=q(u),d=C(),h&&h.c(),l=C(),b(n,"class","card p-3")},m(p,v){I(p,n,v),f(n,t),f(t,o),f(n,r),f(n,s),f(s,a),f(s,c),f(n,d),h&&h.m(n,null),f(n,l)},p(p,v){v&1&&e!==(e=p[9].file+"")&&ut(o,e),v&1&&u!==(u=p[9].expand.user.name+"")&&ut(c,u),p[9].user===p[1].authStore.model.id?h?h.p(p,v):(h=bt(p),h.c(),h.m(n,l)):h&&(h.d(1),h=null)},d(p){p&&O(n),h&&h.d()}}}function ce(i){let n;return{c(){n=m("h3"),n.textContent="Laddar..."},m(t,e){I(t,n,e)},p:P,d(t){t&&O(n)}}}function de(i){let n,t,e,o,r,s,a,u=i[1].authStore.isValid&&re(i);function c(h,p){return h[1].authStore.isValid?ae:se}let l=c(i)(i);return{c(){n=m("main"),t=m("div"),e=m("div"),o=m("h1"),o.textContent="Filerr",r=C(),s=m("div"),u&&u.c(),a=C(),l.c(),b(s,"class","d-flex justify-content-end align-items-center"),b(e,"class","d-flex justify-content-between flex-row"),b(t,"class","container text-center")},m(h,p){I(h,n,p),f(n,t),f(t,e),f(e,o),f(e,r),f(e,s),u&&u.m(s,null),f(n,a),l.m(n,null)},p(h,[p]){h[1].authStore.isValid&&u.p(h,p),l.p(h,p)},i:P,o:P,d(h){h&&O(n),u&&u.d(),l.d()}}}function he(i,n,t){const e=new ie("https://filerr.local.emilzackrisson.se");console.log("Logged In: ",e.authStore.isValid);let o=[];async function r(l){const h=l.target,p=new FormData(h),v=p.get("username").toString(),S=p.get("password").toString();console.log(v,S),await e.collection("users").authWithPassword(v,S).then(()=>{window.location.reload()}).catch(j=>{console.log(j.message),j.message==="Failed to authenticate."?alert("Fel användarnamn eller lösenord"):alert("Något gick fel")})}function s(){e.authStore.clear(),window.location.reload()}async function a(l){const h=l.target,p=new FormData(h),v=p.get("file").toString(),S=p.get("type").toString(),j={file:v,completed:!1,type:S,user:e.authStore.model.id};await e.collection("requests").create(j).then(()=>{window.location.reload()})}async function u(){console.log("Getting requests"),await e.collection("requests").getFullList(50,{sort:"-created",expand:"user"}).then(l=>{t(0,o=l),console.log("Got requests",o)})}e.authStore.isValid&&(console.log("User: ",e.authStore.model.id),e.authStore.model.id==="jcj1e83y9nsfi3q"&&console.log("You are admin"),u());async function c(l){await e.collection("requests").delete(l).then(()=>{window.location.reload()})}return[o,e,r,s,a,c,l=>{c(l.id)}]}class pe extends Vt{constructor(n){super(),Mt(this,n,he,de,Pt,{})}}new pe({target:document.getElementById("app")});
